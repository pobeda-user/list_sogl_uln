<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#111827" />
    <link rel="manifest" href="./manifest.json" />
    <link rel="icon" href="./favicon.svg?v=2025-12-22-6" type="image/svg+xml" />
    <link rel="icon" href="./favicon.ico?v=2025-12-22-6" sizes="any" />
    <link rel="stylesheet" href="./styles.css?v=2025-12-22-6" />
    <title>Менеджеры. Личный кабинет ЛС</title>
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="topbar__brand">
          <img id="ownerLogo" class="topbar__logo" alt="Логотип" />
          <div class="topbar__title">Личный кабинет менеджера</div>
        </div>
        <div class="topbar__actions">
          <button id="btnSettings" class="btn btn--ghost btn--icon" type="button">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" fill="none" stroke="currentColor" stroke-width="2"/><path d="M19.4 15a7.9 7.9 0 0 0 .1-1l2-1.2-2-3.5-2.3.5a8.3 8.3 0 0 0-1.7-1L15 6l-4-.5L9 6l-.5 2.3a8.3 8.3 0 0 0-1.7 1l-2.3-.5-2 3.5 2 1.2a7.9 7.9 0 0 0 .1 1 7.9 7.9 0 0 0-.1 1l-2 1.2 2 3.5 2.3-.5a8.3 8.3 0 0 0 1.7 1L9 18l2 1 4-.5.5-2.3a8.3 8.3 0 0 0 1.7-1l2.3.5 2-3.5-2-1.2a7.9 7.9 0 0 0-.1-1Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Настройки
          </button>
        </div>
      </header>

      <main class="main">
        <section id="viewSettings" class="card hidden" aria-label="Настройки">
          <div class="card__header">
            <div class="card__title">Настройки</div>
            <div class="card__subtitle">Укажи URL Web App (gs2) вида .../exec</div>
          </div>

          <div class="form">
            <label class="field">
              <div class="field__label">URL API</div>
              <input id="apiBase" class="field__input" type="url" placeholder="https://script.google.com/macros/s/.../exec" />
            </label>

            <div class="form__row">
              <button id="btnSaveApi" class="btn btn--primary" type="button">Сохранить</button>
              <button id="btnCloseSettings" class="btn" type="button">Закрыть</button>
            </div>

            <div class="hint">
              <div class="hint__title">Проверка</div>
              <div class="hint__text">
                После сохранения открой “Обновить” и выбери объект/менеджера.
              </div>
            </div>
          </div>
        </section>

        <section id="viewSelect" class="card" aria-label="Выбор менеджера">
          <div class="card__header">
            <div class="card__title">Выбор</div>
            <div class="card__subtitle">Сначала объект, затем менеджер</div>
          </div>

          <div class="grid">
            <div>
              <div class="label">Объект</div>
              <div class="segmented" role="group" aria-label="Объект">
                <button class="segmented__btn" type="button" data-owner="Гулливер">Гулливер</button>
                <button class="segmented__btn" type="button" data-owner="Победа">Победа</button>
              </div>
            </div>

            <div>
              <button id="btnOpenRequests" class="btn btn--primary" type="button" disabled>Открыть заявки</button>
            </div>
          </div>

          <div class="managerPanel">
            <div class="managerPanel__top">
              <label class="field field--inline managerPanel__search">
                <div class="field__label">Менеджеры</div>
                <input id="managerSearch" class="field__input" type="search" placeholder="Поиск по ФИО" />
              </label>
              <button id="btnRefreshManagers" class="btn btn--icon" type="button">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 12a9 9 0 0 1-15.3 6.36" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M3 12a9 9 0 0 1 15.3-6.36" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M6 20l-.3-1.64L4 17" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 4l.3 1.64L20 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Обновить список
              </button>
            </div>

            <div id="managersGrid" class="cards" aria-live="polite"></div>
          </div>

          <div id="selectMeta" class="meta"></div>
        </section>

        <section id="viewRequests" class="card hidden" aria-label="Заявки">
          <div class="card__header">
            <div class="card__title" id="requestsTitle">Заявки</div>
            <div class="card__subtitle" id="requestsSubtitle"></div>
          </div>

          <div class="toolbar">
            <label class="field field--inline">
              <div class="field__label">Статус</div>
              <select id="statusFilter" class="field__input">
                <option value="">Все</option>
                <option value="Ожидает согласования">Ожидает согласования</option>
                <option value="Согласовано">Согласовано</option>
                <option value="Не согласовано">Не согласовано</option>
                <option value="Ожидание росписи">Ожидание росписи</option>
                <option value="Частично согласовано">Частично согласовано</option>
              </select>
            </label>

            <label class="field field--inline">
              <div class="field__label">Поиск</div>
              <input id="searchInput" class="field__input" type="search" placeholder="ID заявки, поставщик, ЛК" />
            </label>

            <button id="btnRefreshRequests" class="btn btn--icon" type="button">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 12a9 9 0 0 1-15.3 6.36" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M3 12a9 9 0 0 1 15.3-6.36" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M6 20l-.3-1.64L4 17" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 4l.3 1.64L20 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Обновить
            </button>
            <button id="btnHome" class="btn" type="button">На главную</button>
            <button id="btnBack" class="btn btn--primary" type="button">Назад</button>
          </div>

          <div id="requestsMeta" class="meta"></div>
          <div id="requestsList" class="list"></div>
        </section>

        <section id="viewError" class="card hidden" aria-label="Ошибка">
          <div class="card__header">
            <div class="card__title">Ошибка</div>
            <div class="card__subtitle" id="errorSubtitle"></div>
          </div>
          <div class="form__row">
            <button id="btnErrorToSettings" class="btn btn--primary" type="button">Открыть настройки</button>
          </div>
        </section>
      </main>

      <footer class="footer">
        <div id="footerStatus" class="footer__status">Готово</div>
      </footer>
    </div>

    <script src="./app.js?v=2025-12-22-6"></script>
  </body>
</html>
